# 测试检查清单

## 已完成的任务 ✅
- [x] 配置 Prefab（Player、Card、JokerItem 等）
- [x] 设置场景（MainMenu、GameRoom、GameScene）
- [x] 分配所有 UI 引用（所有 [SerializeField] 字段）
- [x] 创建资源加载脚本（CardSpriteLoader、JokerSpriteLoader、AvatarSpriteLoader）

## 下一步测试步骤

### 1. 资源加载测试

#### 1.1 在主菜单场景添加资源初始化器
- [ ] 在 MainMenu 场景中创建空对象 "ResourceInitializer"
- [ ] 添加 `ResourceInitializer` 组件
- [ ] 运行游戏，检查 Console 是否有资源加载成功的日志

#### 1.2 检查资源文件路径
确保以下文件存在：
- [x] `Assets/Resources/PlayingCards/PlayingCards.png` (923x380)
- [x] `Assets/Resources/PlayingCards/Cardsback.png` (或 Cardsback_1.png 等)
- [x] `Assets/Resources/Jokers/Jokers.png` (需要根据实际大小调整切分参数)
- [x] `Assets/Resources/Avatars/Avatars.png` (需要根据实际大小调整切分参数)

#### 1.3 调整资源切分参数
根据实际图片大小，修改以下脚本中的参数：

**JokerSpriteLoader.cs:**
- [ ] 检查 `COLUMNS` 和 `ROWS` 是否正确
- [ ] 检查图片实际大小，确认切分逻辑

**AvatarSpriteLoader.cs:**
- [ ] 检查 `COLUMNS` 和 `ROWS` 是否正确
- [ ] 检查图片实际大小，确认切分逻辑

### 2. 主菜单场景测试

#### 2.1 玩家信息显示
- [ ] 运行游戏，检查是否弹出玩家信息输入窗口
- [ ] 输入玩家名称
- [ ] 选择头像（检查头像是否正确显示）
- [ ] 点击确认，检查玩家信息是否正确显示在左上角
- [ ] 检查资金显示（应该显示 20）

#### 2.2 商店功能
- [ ] 检查商店区域是否正确显示
- [ ] 检查商店中是否有10张小丑牌（需要先初始化商店）
- [ ] 检查玩家小丑牌区域（应该为空，因为刚开始）

#### 2.3 按钮功能
- [ ] 点击"创建房间"按钮，检查是否切换到 GameRoom 场景
- [ ] 点击"加入房间"按钮，检查是否切换到 GameRoom 场景
- [ ] 点击"退出游戏"按钮，检查是否退出

### 3. 房间场景测试

#### 3.1 创建房间（房主）
- [ ] 点击"创建房间"后，检查是否显示房间IP
- [ ] 检查是否显示二维码（如果已实现）
- [ ] 检查玩家列表是否显示自己
- [ ] 检查"开始游戏"按钮是否禁用（因为只有1人）

#### 3.2 加入房间（客户端）
- [ ] 在另一台设备/编辑器实例中运行游戏
- [ ] 点击"加入房间"
- [ ] 输入房主IP地址
- [ ] 点击"连接"，检查是否成功加入房间
- [ ] 检查房主端是否显示新玩家

#### 3.3 开始游戏
- [ ] 当玩家数 >= 2 时，检查"开始游戏"按钮是否可用
- [ ] 点击"开始游戏"，检查是否切换到 GameScene 场景
- [ ] 检查所有玩家是否都进入游戏场景

### 4. 游戏场景测试

#### 4.1 游戏初始化
- [ ] 检查是否显示玩家信息（左上角）
- [ ] 检查是否显示手牌（底部，8张）
- [ ] 检查是否显示小丑牌区域（中间偏右上方）
- [ ] 检查是否显示三个操作按钮（出牌、押注、弃牌）
- [ ] 检查是否显示其他玩家头像（四周，逆时针）

#### 4.2 出牌功能
- [ ] 点击手牌，检查是否向上移动（选中状态）
- [ ] 选择1-5张牌
- [ ] 检查"出牌"按钮是否可用
- [ ] 点击"出牌"，检查：
  - [ ] 是否在中心显示出的牌
  - [ ] 是否显示分数
  - [ ] 手牌是否被移除
  - [ ] 是否轮到下一个玩家

#### 4.3 押注功能
- [ ] 点击"押注"按钮，检查是否弹出押注窗口
- [ ] 输入押注金额
- [ ] 点击"确认"，检查：
  - [ ] 资金是否减少
  - [ ] 底池是否增加
  - [ ] 是否轮到下一个玩家

#### 4.4 弃牌功能
- [ ] 选择要弃的牌
- [ ] 点击"弃牌"，检查：
  - [ ] 选中的牌是否被移除
  - [ ] 是否立即摸等数量的新牌
  - [ ] 剩余弃牌次数是否减少

#### 4.5 小丑牌效果
- [ ] 检查小丑牌是否正确显示
- [ ] 出牌时检查小丑牌加成是否正确计算
- [ ] 测试不同小丑牌的效果

#### 4.6 游戏结束
- [ ] 所有玩家出完牌后，检查是否显示结算面板
- [ ] 检查是否显示所有玩家分数
- [ ] 检查是否显示获胜者
- [ ] 检查底池分配是否正确
- [ ] 点击"返回主菜单"，检查是否返回 MainMenu 场景

### 5. 网络同步测试

#### 5.1 数据同步
- [ ] 检查玩家名称是否在所有客户端同步
- [ ] 检查玩家头像是否在所有客户端同步
- [ ] 检查资金是否在所有客户端同步
- [ ] 检查手牌是否只在本地显示（其他玩家看不到）

#### 5.2 游戏状态同步
- [ ] 检查出牌顺序是否在所有客户端一致
- [ ] 检查出的牌是否在所有客户端显示
- [ ] 检查分数是否在所有客户端显示
- [ ] 检查底池是否在所有客户端同步

### 6. 边界情况测试

#### 6.1 欠债系统
- [ ] 测试资金不足时押注（应该允许欠债）
- [ ] 测试游戏结束后还债逻辑
- [ ] 检查欠债显示是否正确

#### 6.2 强制出牌
- [ ] 测试只剩一个玩家时，是否强制出牌
- [ ] 检查"押注"按钮是否禁用

#### 6.3 分数相同
- [ ] 测试多个玩家分数相同时，是否平分底池
- [ ] 检查余数是否归系统

#### 6.4 网络断开
- [ ] 测试玩家断开连接时的处理
- [ ] 检查是否返回主菜单

### 7. 性能测试

#### 7.1 资源加载
- [ ] 检查资源加载时间
- [ ] 检查内存使用情况

#### 7.2 网络性能
- [ ] 检查网络延迟
- [ ] 检查数据同步速度

### 8. 打包测试

#### 8.1 Android 打包
- [ ] 配置 Android 构建设置
- [ ] 打包 APK
- [ ] 在 Android 设备上安装测试
- [ ] 测试局域网连接

#### 8.2 iOS 打包
- [ ] 配置 iOS 构建设置
- [ ] 使用 Xcode 打包
- [ ] 在 iOS 设备上测试
- [ ] 测试局域网连接

## 常见问题排查

### 资源加载失败
- 检查资源文件路径是否正确
- 检查资源文件是否在 Resources 文件夹中
- 检查图片格式是否支持（PNG、JPG）
- 检查切分参数是否正确

### 网络连接失败
- 检查防火墙设置
- 检查设备是否在同一局域网
- 检查 IP 地址是否正确
- 检查 NetworkManager 配置

### UI 显示问题
- 检查所有引用是否已分配
- 检查 Canvas 设置
- 检查 RectTransform 设置
- 检查图片资源是否正确加载

### 游戏逻辑错误
- 检查 Console 日志
- 检查网络同步是否正确
- 检查服务器端逻辑
- 检查客户端逻辑

## 调试技巧

1. **使用 Debug.Log**：在关键位置添加日志
2. **使用 Unity Profiler**：检查性能问题
3. **使用 Network Statistics**：检查网络状态
4. **使用断点调试**：在 Visual Studio 中设置断点

## 完成标准

所有测试项通过后，游戏应该能够：
- ✅ 正常创建和加入房间
- ✅ 正常进行游戏（出牌、押注、弃牌）
- ✅ 正确计算分数和结算
- ✅ 正确同步网络数据
- ✅ 在 Android/iOS 上正常运行

